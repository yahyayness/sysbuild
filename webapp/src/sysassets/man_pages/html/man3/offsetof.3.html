<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML><HEAD><TITLE>Man page of OFFSETOF</TITLE>
</HEAD><BODY>
<H1>OFFSETOF</H1>
Section: Linux Programmer's Manual (3)<BR>Updated: 2014-04-06<BR><A HREF="#index">Index</A>
<A HREF="../index.html">Return to Main Contents</A><HR>

<A NAME="lbAB">&nbsp;</A>
<H2>NAME</H2>

offsetof - offset of a structure member
<A NAME="lbAC">&nbsp;</A>
<H2>SYNOPSIS</H2>

<PRE>
<B>#include &lt;<A HREF="file:///usr/include/stddef.h">stddef.h</A>&gt;</B>

<B>size_t offsetof(</B><I>type</I><B>, </B><I>member</I><B>);</B>
</PRE>

<A NAME="lbAD">&nbsp;</A>
<H2>DESCRIPTION</H2>

The macro
<B>offsetof</B>()

returns the offset of the field
<I>member</I>

from the start of the structure
<I>type</I>.

<P>
This macro is useful because the sizes of the fields that compose
a structure can vary across implementations,
and compilers may insert different numbers of padding
bytes between fields.
Consequently, an element's offset is not necessarily
given by the sum of the sizes of the previous elements.
<P>
A compiler error will result if
<I>member</I>

is not aligned to a byte boundary
(i.e., it is a bit field).
<A NAME="lbAE">&nbsp;</A>
<H2>RETURN VALUE</H2>

<B>offsetof</B>()

returns the offset of the given
<I>member</I>

within the given
<I>type</I>,

in units of bytes.
<A NAME="lbAF">&nbsp;</A>
<H2>CONFORMING TO</H2>

C89, C99, POSIX.1-2001.
<A NAME="lbAG">&nbsp;</A>
<H2>EXAMPLE</H2>

On a Linux/i386 system, when compiled using the default
<B><A HREF="../man1/gcc.1.html">gcc</A></B>(1)

options, the program below produces the following output:

<PRE>

$<B> ./a.out</B>
offsets: i=0; c=4; d=8 a=16
sizeof(struct s)=16
</PRE>

<A NAME="lbAH">&nbsp;</A>
<H3>Program source</H3>


<PRE>
#include &lt;<A HREF="file:///usr/include/stddef.h">stddef.h</A>&gt;
#include &lt;<A HREF="file:///usr/include/stdio.h">stdio.h</A>&gt;
#include &lt;<A HREF="file:///usr/include/stdlib.h">stdlib.h</A>&gt;

int
main(void)
{
    struct s {
        int i;
        char c;
        double d;
        char a[];
    };

    /* Output is compiler dependent */

    printf(&quot;offsets: i=%zd; c=%zd; d=%zd a=%zd\n&quot;,
            offsetof(struct s, i), offsetof(struct s, c),
            offsetof(struct s, d), offsetof(struct s, a));
    printf(&quot;sizeof(struct s)=%zd\n&quot;, sizeof(struct s));

    exit(EXIT_SUCCESS);
}
</PRE>

<P>

<HR>
<A NAME="index">&nbsp;</A><H2>Index</H2>
<DL>
<DT><A HREF="#lbAB">NAME</A><DD>
<DT><A HREF="#lbAC">SYNOPSIS</A><DD>
<DT><A HREF="#lbAD">DESCRIPTION</A><DD>
<DT><A HREF="#lbAE">RETURN VALUE</A><DD>
<DT><A HREF="#lbAF">CONFORMING TO</A><DD>
<DT><A HREF="#lbAG">EXAMPLE</A><DD>
<DL>
<DT><A HREF="#lbAH">Program source</A><DD>
</DL>
</DL>
<HR>
This document was created by
<A HREF="/cgi-bin/man/man2html">man2html</A>,
using the manual pages.<BR>
Time: 02:55:04 GMT, September 18, 2014
</BODY>
</HTML>
